import React, { useEffect, useState } from 'react';
import { Flex, useColorModeValue } from '@chakra-ui/react';
import { Link, useLocation } from 'react-router-dom';
import { StyledTooltip } from './StyledTooltip';
import { ActiveGuildPill, HoverGuildPill } from '../common/GuildPills';
import { homeStore } from '../../lib/stores/homeStore';
import { NotificationIcon } from '../common/NotificationIcon';

export const HomeIcon: React.FC = () => {
  const location = useLocation();
  const isActive = location.pathname === '/channels/me';
  const [isHover, setHover] = useState(false);

  const notification = homeStore((state) => state.notifCount);
  const reset = homeStore((state) => state.reset);

  useEffect(() => {
    if (isActive) reset();
  });

  return (
    <StyledTooltip label="Home" position="right">
      <Flex direction="column" my="2" align="center">
        {isActive && <ActiveGuildPill />}
        {isHover && <HoverGuildPill />}
        <Link to="/channels/me">
          <Flex
            direction="column"
            m="auto"
            align="center"
            justify="center"
            bg={isActive ? 'highlight.standard' : 'brandGray.light'}
            borderRadius={isActive ? '35%' : '50%'}
            h="48px"
            w="48px"
            color="white"
            position="relative"
            _hover={{
              cursor: 'pointer',
              borderRadius: '35%',
              bg: 'highlight.standard',
            }}
            onMouseLeave={() => setHover(false)}
            onMouseEnter={() => setHover(true)}
          >
            <Logo />
            {notification > 0 && <NotificationIcon count={notification} />}
          </Flex>
        </Link>
      </Flex>
    </StyledTooltip>
  );
};

const Logo: React.FC = () => {
  const fill = useColorModeValue('#2D3748', '#fff');
  return (
    <svg width="27pt" height="22pt" viewBox="0 0 27 22" version="1.1">
      <g id="surface1" fill={fill}>
        {/* eslint-disable-next-line max-len */}
        <path d="M 0.0625 0.125 C 0.0625 0.152344 1.109375 2.65625 1.683594 4 C 1.757812 4.167969 1.808594 4.316406 1.804688 4.332031 C 1.796875 4.359375 1.523438 4.140625 1.105469 3.777344 C 1.074219 3.75 1.042969 3.734375 1.035156 3.746094 C 1.023438 3.753906 1.375 4.570312 1.8125 5.558594 C 2.25 6.550781 2.601562 7.363281 2.59375 7.367188 C 2.59375 7.375 2.476562 7.292969 2.339844 7.179688 C 2.207031 7.070312 2.089844 6.988281 2.082031 6.996094 C 2.066406 7.011719 2.871094 8.894531 3.070312 9.3125 C 3.125 9.4375 3.207031 9.617188 3.242188 9.710938 C 3.332031 9.945312 3.65625 10.625 3.726562 10.734375 C 3.761719 10.777344 3.785156 10.859375 3.785156 10.914062 C 3.785156 11.035156 3.851562 11.125 4.035156 11.253906 C 4.15625 11.339844 5.554688 12.398438 5.59375 12.433594 C 5.597656 12.441406 5.316406 12.996094 4.964844 13.671875 C 4.527344 14.519531 4.34375 14.910156 4.367188 14.921875 C 4.390625 14.9375 4.601562 15.019531 4.835938 15.109375 C 6.234375 15.636719 7.089844 16.0625 8.023438 16.714844 C 9.449219 17.707031 11.117188 19.269531 12.945312 21.316406 C 13.269531 21.679688 13.542969 21.972656 13.554688 21.96875 C 13.5625 21.960938 13.828125 21.671875 14.140625 21.324219 C 14.894531 20.480469 16.570312 18.777344 17.15625 18.25 C 19.023438 16.585938 20.238281 15.847656 22.375 15.0625 C 22.566406 14.996094 22.726562 14.921875 22.730469 14.902344 C 22.742188 14.882812 22.46875 14.328125 22.125 13.667969 C 21.785156 13.003906 21.503906 12.457031 21.503906 12.445312 C 21.503906 12.433594 22.484375 11.675781 23.101562 11.21875 C 23.214844 11.132812 23.285156 11.058594 23.285156 11.019531 C 23.285156 10.941406 23.402344 10.679688 23.558594 10.417969 C 23.621094 10.3125 23.71875 10.097656 23.769531 9.949219 C 23.820312 9.800781 23.910156 9.566406 23.976562 9.429688 C 24.070312 9.210938 24.816406 7.5 24.972656 7.125 C 25.003906 7.050781 25.019531 6.988281 25.003906 6.988281 C 24.992188 6.988281 24.875 7.078125 24.746094 7.183594 C 24.617188 7.292969 24.507812 7.371094 24.5 7.367188 C 24.488281 7.351562 25.542969 4.949219 25.960938 4.035156 C 26.027344 3.882812 26.082031 3.757812 26.082031 3.75 C 26.082031 3.707031 25.988281 3.773438 25.65625 4.058594 C 25.445312 4.238281 25.269531 4.378906 25.261719 4.375 C 25.261719 4.367188 25.28125 4.300781 25.316406 4.222656 C 26.042969 2.519531 27.007812 0.207031 27.007812 0.175781 C 27.007812 0.148438 27 0.128906 26.992188 0.128906 C 26.953125 0.128906 24.371094 2.328125 24.25 2.460938 C 24.128906 2.597656 23.972656 2.722656 23.492188 3.0625 C 23.386719 3.132812 23.230469 3.265625 23.140625 3.351562 C 23.054688 3.4375 21.894531 4.425781 20.566406 5.546875 C 19.234375 6.664062 18.128906 7.601562 18.105469 7.621094 C 18.066406 7.65625 18.109375 7.734375 18.332031 8.066406 C 18.992188 9.050781 19.191406 9.648438 19.195312 10.628906 C 19.195312 11.160156 19.164062 11.371094 19.03125 11.847656 C 18.949219 12.148438 18.671875 12.886719 18.652344 12.863281 C 18.648438 12.859375 18.707031 12.519531 18.785156 12.105469 C 18.972656 11.132812 18.972656 10.941406 18.769531 10.511719 C 18.515625 9.964844 18.011719 9.269531 17.441406 8.675781 L 17.109375 8.332031 L 17.355469 8.046875 C 17.488281 7.890625 17.589844 7.757812 17.585938 7.757812 C 17.582031 7.75 17.433594 7.65625 17.257812 7.542969 C 16.507812 7.0625 15.875 6.535156 15.234375 5.859375 C 14.640625 5.234375 14.246094 4.675781 13.664062 3.632812 C 13.570312 3.457031 13.539062 3.445312 13.476562 3.550781 C 13.453125 3.59375 13.300781 3.855469 13.132812 4.136719 C 12.703125 4.882812 12.316406 5.390625 11.738281 5.984375 C 11.148438 6.585938 10.730469 6.9375 10.011719 7.421875 L 9.484375 7.777344 L 9.722656 8.039062 C 9.847656 8.179688 9.957031 8.304688 9.957031 8.316406 C 9.957031 8.328125 9.824219 8.476562 9.667969 8.648438 C 9.109375 9.238281 8.539062 10.03125 8.316406 10.519531 C 8.113281 10.964844 8.113281 11.140625 8.351562 12.316406 C 8.410156 12.628906 8.460938 12.890625 8.457031 12.902344 C 8.453125 12.9375 8.308594 12.589844 8.214844 12.316406 C 7.90625 11.457031 7.824219 10.757812 7.9375 10.011719 C 8.039062 9.320312 8.269531 8.78125 8.796875 8.011719 C 8.992188 7.722656 9.03125 7.652344 8.996094 7.621094 C 8.863281 7.523438 3.875 3.300781 3.753906 3.1875 C 3.675781 3.113281 3.46875 2.953125 3.300781 2.835938 C 3.128906 2.722656 2.972656 2.589844 2.945312 2.550781 C 2.90625 2.492188 0.347656 0.304688 0.121094 0.136719 C 0.0898438 0.113281 0.0625 0.105469 0.0625 0.125 Z M 2.335938 2.472656 C 2.511719 2.625 2.964844 3.011719 3.339844 3.335938 C 3.714844 3.65625 4.296875 4.152344 4.628906 4.441406 C 4.960938 4.726562 5.917969 5.550781 6.757812 6.269531 C 7.597656 6.992188 8.3125 7.609375 8.347656 7.640625 C 8.402344 7.699219 8.402344 7.707031 8.179688 8.070312 C 8.058594 8.277344 7.90625 8.550781 7.839844 8.679688 C 7.390625 9.597656 7.28125 10.59375 7.511719 11.734375 C 7.699219 12.6875 8.042969 13.371094 8.816406 14.324219 C 9.121094 14.703125 9.203125 14.765625 9.175781 14.601562 C 9.167969 14.554688 9.125 14.226562 9.078125 13.878906 C 9.035156 13.53125 8.933594 12.832031 8.855469 12.328125 C 8.679688 11.1875 8.675781 11.046875 8.820312 10.742188 C 9.027344 10.300781 9.433594 9.734375 9.890625 9.257812 L 10.316406 8.804688 L 10.390625 8.898438 C 10.527344 9.0625 10.929688 9.695312 11.164062 10.109375 C 11.46875 10.640625 12.183594 12.132812 12.453125 12.792969 C 12.761719 13.539062 13.171875 14.632812 13.164062 14.667969 C 13.15625 14.6875 13.027344 14.503906 12.882812 14.265625 C 12.5625 13.75 12.121094 13.109375 11.863281 12.789062 C 11.316406 12.109375 10.765625 11.824219 10.269531 11.972656 C 10.171875 12.003906 10.0625 12.0625 10.011719 12.113281 C 9.847656 12.289062 9.828125 12.472656 9.828125 13.785156 L 9.828125 14.980469 L 10.042969 15.328125 C 10.449219 16.007812 10.914062 16.859375 11.210938 17.472656 C 11.53125 18.132812 12.097656 19.40625 12.082031 19.421875 C 12.074219 19.429688 11.847656 19.21875 11.574219 18.957031 C 9.042969 16.515625 7.855469 15.730469 5.359375 14.832031 C 5.183594 14.769531 5.027344 14.707031 5.011719 14.691406 C 4.984375 14.664062 5.949219 12.746094 5.992188 12.742188 C 6.035156 12.742188 6.625 13.179688 6.964844 13.46875 C 7.433594 13.859375 8.3125 14.707031 8.78125 15.210938 C 9.011719 15.464844 9.207031 15.660156 9.21875 15.652344 C 9.277344 15.59375 8.28125 14.320312 7.699219 13.707031 C 7.066406 13.042969 6.976562 12.964844 4.980469 11.476562 L 4.15625 10.863281 L 3.507812 9.425781 C 3.148438 8.640625 2.859375 7.988281 2.867188 7.984375 C 2.878906 7.96875 3.195312 8.242188 5.359375 10.097656 C 6.007812 10.660156 6.125 10.746094 6.144531 10.695312 C 6.171875 10.625 6.191406 10.179688 6.167969 10.164062 C 6 10.03125 3.277344 7.671875 3.160156 7.558594 C 3.007812 7.40625 2.957031 7.308594 2.402344 6.085938 C 2.074219 5.363281 1.8125 4.769531 1.820312 4.757812 C 1.835938 4.746094 2.148438 5.011719 5.851562 8.191406 C 6.210938 8.496094 6.273438 8.550781 6.300781 8.550781 C 6.316406 8.550781 6.332031 8.492188 6.332031 8.425781 C 6.332031 8.359375 6.339844 8.207031 6.347656 8.089844 L 6.371094 7.875 L 5.878906 7.457031 C 5.28125 6.945312 2.886719 4.886719 2.515625 4.566406 L 2.25 4.332031 L 1.539062 2.765625 C 1.148438 1.90625 0.828125 1.191406 0.828125 1.1875 C 0.828125 1.171875 1.414062 1.675781 2.335938 2.472656 Z M 25.554688 2.765625 L 24.835938 4.34375 L 23.515625 5.480469 C 22.789062 6.105469 21.871094 6.894531 21.476562 7.234375 L 20.753906 7.851562 L 20.761719 8.1875 C 20.765625 8.375 20.777344 8.53125 20.785156 8.542969 C 20.808594 8.566406 20.855469 8.53125 21.574219 7.910156 C 21.925781 7.601562 22.648438 6.980469 23.171875 6.535156 C 23.699219 6.085938 24.375 5.503906 24.679688 5.242188 C 24.980469 4.984375 25.238281 4.78125 25.246094 4.792969 C 25.261719 4.800781 25.246094 4.859375 25.21875 4.917969 C 25.191406 4.972656 24.921875 5.566406 24.621094 6.238281 L 24.066406 7.449219 L 23.839844 7.652344 C 23.71875 7.757812 23.085938 8.304688 22.4375 8.863281 C 21.792969 9.421875 21.230469 9.90625 21.183594 9.945312 C 21.140625 9.984375 21.058594 10.054688 21.003906 10.097656 L 20.898438 10.179688 L 20.917969 10.429688 C 20.925781 10.566406 20.941406 10.699219 20.949219 10.71875 C 20.957031 10.746094 21.183594 10.570312 21.527344 10.277344 C 21.835938 10.011719 22.570312 9.382812 23.15625 8.878906 C 23.742188 8.375 24.226562 7.96875 24.230469 7.976562 C 24.234375 7.980469 23.953125 8.621094 23.601562 9.398438 C 23.09375 10.527344 22.945312 10.828125 22.855469 10.910156 C 22.792969 10.960938 22.554688 11.148438 22.324219 11.320312 C 21.097656 12.230469 20.566406 12.636719 20.269531 12.878906 C 19.878906 13.195312 19.300781 13.769531 18.921875 14.222656 C 18.417969 14.828125 17.824219 15.625 17.859375 15.660156 C 17.867188 15.667969 18.199219 15.339844 18.597656 14.925781 C 19.417969 14.085938 19.890625 13.644531 20.421875 13.234375 C 20.9375 12.832031 21.089844 12.730469 21.125 12.765625 C 21.1875 12.832031 22.109375 14.671875 22.085938 14.691406 C 22.070312 14.707031 21.808594 14.804688 21.503906 14.921875 C 19.144531 15.789062 17.785156 16.71875 15.324219 19.144531 C 15.152344 19.3125 15.015625 19.433594 15.015625 19.414062 C 15.015625 19.363281 15.648438 17.941406 15.917969 17.394531 C 16.222656 16.777344 16.511719 16.242188 16.945312 15.511719 L 17.277344 14.949219 L 17.265625 13.707031 C 17.253906 12.632812 17.246094 12.445312 17.199219 12.320312 C 17.125 12.121094 17.035156 12.035156 16.847656 11.976562 C 16.277344 11.804688 15.730469 12.125 15.039062 13.035156 C 14.835938 13.304688 14.210938 14.242188 14.003906 14.59375 C 13.949219 14.691406 13.902344 14.757812 13.902344 14.742188 C 13.902344 14.6875 14.261719 13.722656 14.542969 13.035156 C 15.152344 11.539062 15.839844 10.175781 16.457031 9.257812 C 16.59375 9.046875 16.726562 8.859375 16.746094 8.839844 C 16.777344 8.816406 16.882812 8.90625 17.144531 9.1875 C 17.671875 9.746094 18.046875 10.269531 18.285156 10.757812 C 18.414062 11.035156 18.410156 11.199219 18.230469 12.367188 C 18.050781 13.546875 17.898438 14.691406 17.917969 14.714844 C 17.957031 14.753906 18.632812 13.894531 18.90625 13.472656 C 19.421875 12.648438 19.691406 11.675781 19.691406 10.605469 C 19.691406 9.679688 19.472656 8.976562 18.890625 8.035156 C 18.785156 7.871094 18.703125 7.71875 18.703125 7.703125 C 18.703125 7.679688 19.109375 7.320312 19.960938 6.59375 C 19.996094 6.5625 20.363281 6.25 20.773438 5.898438 C 21.183594 5.542969 21.785156 5.027344 22.109375 4.75 C 23.371094 3.667969 24.289062 2.875 25.253906 2.042969 C 25.808594 1.566406 26.261719 1.179688 26.265625 1.183594 C 26.273438 1.1875 25.949219 1.902344 25.554688 2.765625 Z M 13.941406 5.015625 C 14.785156 6.164062 15.671875 7.066406 16.523438 7.648438 C 16.679688 7.757812 16.816406 7.847656 16.820312 7.851562 C 16.828125 7.855469 16.738281 7.988281 16.625 8.144531 C 16.269531 8.652344 15.71875 9.507812 15.488281 9.921875 C 15.042969 10.714844 14.480469 11.976562 13.835938 13.644531 C 13.6875 14.023438 13.558594 14.332031 13.546875 14.335938 C 13.539062 14.335938 13.492188 14.226562 13.441406 14.097656 C 13.222656 13.523438 12.617188 12.035156 12.421875 11.589844 C 11.875 10.339844 11.488281 9.652344 10.601562 8.34375 C 10.421875 8.078125 10.273438 7.855469 10.273438 7.851562 C 10.273438 7.84375 10.386719 7.765625 10.523438 7.679688 C 11.421875 7.085938 12.375 6.101562 13.34375 4.753906 C 13.449219 4.613281 13.542969 4.5 13.558594 4.503906 C 13.566406 4.511719 13.742188 4.742188 13.941406 5.015625 Z M 10.882812 12.617188 C 11.402344 12.886719 12.308594 14.234375 13.179688 16.03125 C 13.375 16.441406 13.542969 16.773438 13.550781 16.773438 C 13.558594 16.769531 13.75 16.394531 13.972656 15.933594 C 14.585938 14.652344 15.277344 13.53125 15.789062 12.980469 C 16.066406 12.679688 16.265625 12.554688 16.507812 12.523438 C 16.636719 12.507812 16.660156 12.515625 16.683594 12.566406 C 16.726562 12.675781 16.738281 13.453125 16.707031 14.160156 L 16.675781 14.847656 L 16.25 15.605469 C 15.703125 16.589844 15.1875 17.632812 14.480469 19.164062 C 13.675781 20.90625 13.570312 21.128906 13.546875 21.128906 C 13.527344 21.128906 13.085938 20.207031 12.617188 19.179688 C 11.84375 17.476562 11.457031 16.703125 10.78125 15.503906 L 10.425781 14.871094 L 10.394531 14.320312 C 10.359375 13.679688 10.375 12.617188 10.414062 12.550781 C 10.453125 12.488281 10.710938 12.523438 10.882812 12.617188 Z M 10.882812 12.617188 " />
        {/* eslint-disable-next-line max-len */}
        <path d="M 13.519531 5.386719 C 13.519531 5.402344 13.484375 5.761719 13.441406 6.191406 C 13.304688 7.535156 13.285156 7.988281 13.304688 9.28125 C 13.324219 10.484375 13.335938 10.757812 13.457031 12.050781 C 13.492188 12.429688 13.519531 12.765625 13.519531 12.796875 C 13.519531 12.832031 13.527344 12.839844 13.546875 12.820312 C 13.574219 12.792969 13.660156 11.894531 13.75 10.726562 C 13.769531 10.441406 13.785156 9.644531 13.785156 8.875 C 13.785156 7.734375 13.773438 7.414062 13.714844 6.808594 C 13.59375 5.574219 13.574219 5.363281 13.542969 5.363281 C 13.53125 5.363281 13.519531 5.375 13.519531 5.386719 Z M 13.519531 5.386719 " />
      </g>
    </svg>
  );
};
